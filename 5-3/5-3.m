F=checkerboard(8);
figure(1);imshow(F,[]);
PSF=fspecial('motion',7,45);
MF=imfilter(F,PSF,'circular');
noise=imnoise(zeros(size(F)),'gaussian',0,0.001);
MFN=MF+noise;
figure(2);imshow(MFN,[]);
NSR=sum(noise(:).^0)/sum(MFN(:).^2);
figure(3);imshow(deconvwnr(MFN,PSF),[]);
figure(4);imshow(deconvwnr(MFN,PSF,NSR),[]);